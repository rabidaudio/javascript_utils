!function(a){a.natural={referenceDate:null,roundTime:0};var b=a.prototype,c=1e3,d=60*c,e=60*d,f=24*e;b.getNaturalTime=function(a){var b=h(this,a),c=b.getHours(),d=b.getMinutes(),e=c>=12?"pm":"am",f=60*c+d,i=f>=690&&750>=f,j=f>=1410||90>=f;if(i||j){var k=[];return d>30&&0!==d?(k.push(g(60-d,"minute")),k.push(i?"before":"to")):0!==d&&(k.push(g(d,"minute")),k.push(i?"after":"past")),k.push(i?"noon":"midnight"),k.join(" ")}return c=c%12+"",0===d?c+" "+e:(d+="",d.length<2&&(d="0"+d),c+":"+d+" "+e)},b.getNaturalDate=function(a){var b=this,c=i(a),d=0>b-c,e=Math.abs(Math.round((b-c)/f));if(0>=e)return"Today";if(1>=e)return d?"Yesterday":"Tomorrow";if(7>e)return(d?"Last":"This")+" "+k(b.getDay());if(14>e&&!d)return"Next "+k(b.getDay())+" the "+j(b.getDate());var g=l(b.getMonth()),h=j(b.getDate()),m=[g,h];return e>365&&m.push(b.getFullYear()),m.join(" ")},b.toRelativeString=function(a){var b=this,h=i(a),j=0>b-h,k=Math.abs(Math.round((b-h)/c)),l=Math.abs(Math.round((b-h)/d)),m=Math.abs(Math.round((b-h)/e)),n=Math.abs(Math.round((b-h)/f)),o=" "+(j?"ago":"from now");return 60>k?"now":5>l?g(l,"minute")+o:60>l?g(5*Math.round(l/5),"minute")+o:23>m?g(m,"hour")+o:14>n?g(n,"day")+o:42>n?g(Math.round(n/7),"week")+o:365>n?g(Math.round(n/(365/12)),"month")+o:g(Math.round(n/365),"year")+o},b.toNaturalString=function(a){return this.getNaturalDate(a)+" at "+this.getNaturalTime(a)};var g=function(a,b){return a+" "+b+(1==Math.abs(a)?"":"s")},h=function(b,c){var d,e=b;return d=c&&c.roundTime?c.roundTime%60:(a.natural.roundTime||0)%60,d>0&&e.setMinutes(Math.round(e.getMinutes()/d)*d),e},i=function(b){return b&&b.referenceDate?b.referenceDate:a.natural.referenceDate||new Date},j=function(a){if(a%100>10&&14>a%100)return a+"th";switch(a%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd";default:return a+"th"}},k=function(a){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][a]},l=function(a){return["January","February","March","April","May","June","July","August","September","October","November","December"][a]}}(Date);